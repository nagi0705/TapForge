---
import { loadTranslation, getLocaleFromPathname } from '../utils/i18n';
import type { Language } from '../lib/i18n';

interface Props {
  lang: Language;
}

const { lang } = Astro.props;
const locale = lang || getLocaleFromPathname(Astro.url.pathname);
const translations = await loadTranslation(locale);
const t = translations.faq;
---

<section id="faq" class="py-20 bg-white">
  <div class="container mx-auto px-4">
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
        {t.title}
      </h2>
      <p class="text-xl text-gray-600">
        {t.subtitle}
      </p>
    </div>

    <div class="max-w-4xl mx-auto">
      <div class="space-y-4">
        <!-- FAQ Item 1 -->
        <details class="group bg-gray-50 rounded-lg">
          <summary
            class="flex justify-between items-center p-6 cursor-pointer hover:bg-gray-100 transition-colors"
          >
            <h3 class="text-lg font-semibold text-gray-900">
              {t.items[0].question}
            </h3>
            <svg
              class="w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
            </svg>
          </summary>
          <div class="px-6 pb-6">
            <p class="text-gray-700 leading-relaxed">
              {
                t.items[0].answer.split("\n").map((line) => (
                  <>
                    {line}
                    <br />
                  </>
                ))
              }
            </p>
          </div>
        </details>

        <!-- FAQ Item 2 -->
        <details class="group bg-gray-50 rounded-lg">
          <summary
            class="flex justify-between items-center p-6 cursor-pointer hover:bg-gray-100 transition-colors"
          >
            <h3 class="text-lg font-semibold text-gray-900">
              {t.items[1].question}
            </h3>
            <svg
              class="w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
            </svg>
          </summary>
          <div class="px-6 pb-6">
            <p class="text-gray-700 leading-relaxed">
              {
                t.items[1].answer.split("\n").map((line) => (
                  <>
                    {line}
                    <br />
                  </>
                ))
              }
            </p>
          </div>
        </details>

        <!-- FAQ Item 3 -->
        <details class="group bg-gray-50 rounded-lg">
          <summary
            class="flex justify-between items-center p-6 cursor-pointer hover:bg-gray-100 transition-colors"
          >
            <h3 class="text-lg font-semibold text-gray-900">
              {t.items[2].question}
            </h3>
            <svg
              class="w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
            </svg>
          </summary>
          <div class="px-6 pb-6">
            <p class="text-gray-700 leading-relaxed">
              {
                t.items[2].answer.split("\n").map((line) => (
                  <>
                    {line}
                    <br />
                  </>
                ))
              }
            </p>
          </div>
        </details>

        <!-- FAQ Item 4 -->
        <details class="group bg-gray-50 rounded-lg">
          <summary
            class="flex justify-between items-center p-6 cursor-pointer hover:bg-gray-100 transition-colors"
          >
            <h3 class="text-lg font-semibold text-gray-900">
              {t.items[3].question}
            </h3>
            <svg
              class="w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
            </svg>
          </summary>
          <div class="px-6 pb-6">
            <p class="text-gray-700 leading-relaxed">
              {
                t.items[3].answer.split("\n").map((line) => (
                  <>
                    {line}
                    <br />
                  </>
                ))
              }
            </p>
          </div>
        </details>

        <!-- FAQ Item 5 -->
        <details class="group bg-gray-50 rounded-lg">
          <summary
            class="flex justify-between items-center p-6 cursor-pointer hover:bg-gray-100 transition-colors"
          >
            <h3 class="text-lg font-semibold text-gray-900">
              {t.items[4].question}
            </h3>
            <svg
              class="w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
            </svg>
          </summary>
          <div class="px-6 pb-6">
            <p class="text-gray-700 leading-relaxed">
              {
                t.items[4].answer.split("\n").map((line) => (
                  <>
                    {line}
                    <br />
                  </>
                ))
              }
            </p>
          </div>
        </details>

        <!-- FAQ Item 6: 月額制について -->
        <details class="group bg-gray-50 rounded-lg">
          <summary
            class="flex justify-between items-center p-6 cursor-pointer hover:bg-gray-100 transition-colors"
          >
            <h3 class="text-lg font-semibold text-gray-900">
              {lang === "ja" ? "なぜ月額制になったのですか？" :
               lang === "en" ? "Why did you switch to a subscription model?" :
               lang === "zh" ? "为什么改为订阅制？" :
               lang === "es" ? "¿Por qué cambiaron a un modelo de suscripción?" :
               lang === "ko" ? "왜 월정액제로 변경되었나요?" :
               "なぜ月額制になったのですか？"}
            </h3>
            <svg
              class="w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
            </svg>
          </summary>
          <div class="px-6 pb-6">
            <p class="text-gray-700 leading-relaxed">
              {lang === "ja" ? "常に最新の機能とセキュリティを提供し、継続的にサービスを改善するためです。月額制により、新機能の開発やサポート体制の充実が可能になります。" :
               lang === "en" ? "To continuously provide the latest features and security updates, and to improve our service constantly. The subscription model enables us to develop new features and enhance support." :
               lang === "zh" ? "为了持续提供最新功能和安全更新，并不断改进我们的服务。订阅模式使我们能够开发新功能并增强支持。" :
               lang === "es" ? "Para proporcionar continuamente las últimas características y actualizaciones de seguridad, y mejorar constantemente nuestro servicio." :
               lang === "ko" ? "최신 기능과 보안을 지속적으로 제공하고 서비스를 계속 개선하기 위해서입니다." :
               "常に最新の機能とセキュリティを提供し、継続的にサービスを改善するためです。"}
            </p>
          </div>
        </details>

        <!-- FAQ Item 7: 早期アクセスと通常料金の違い -->
        <details class="group bg-gray-50 rounded-lg">
          <summary
            class="flex justify-between items-center p-6 cursor-pointer hover:bg-gray-100 transition-colors"
          >
            <h3 class="text-lg font-semibold text-gray-900">
              {lang === "ja" ? "早期アクセスと通常料金の違いは？" :
               lang === "en" ? "What's the difference between early access and regular pricing?" :
               lang === "zh" ? "早期访问和常规定价有什么区别？" :
               lang === "es" ? "¿Cuál es la diferencia entre acceso anticipado y precio regular?" :
               lang === "ko" ? "조기 액세스와 일반 요금의 차이는 무엇인가요?" :
               "早期アクセスと通常料金の違いは？"}
            </h3>
            <svg
              class="w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
            </svg>
          </summary>
          <div class="px-6 pb-6">
            <p class="text-gray-700 leading-relaxed">
              {lang === "ja" ? "早期アクセスは永続的に月額500円でご利用いただけます。通常料金は700円スタートで、段階的に割引され、13ヶ月目以降は500円になります。早期アクセスは限定100名様のみの特別プログラムです。" :
               lang === "en" ? "Early access members enjoy a permanent rate of ¥500/month. Regular pricing starts at ¥700 and gradually decreases to ¥500 after 13 months. Early access is limited to 100 members only." :
               lang === "zh" ? "早期访问会员可享受永久的500日元/月费率。常规定价从700日元开始，13个月后逐渐降至500日元。早期访问仅限100名会员。" :
               lang === "es" ? "Los miembros de acceso anticipado disfrutan de una tarifa permanente de ¥500/mes. El precio regular comienza en ¥700 y disminuye gradualmente a ¥500 después de 13 meses." :
               lang === "ko" ? "조기 액세스는 영구적으로 월 500엔으로 이용할 수 있습니다. 일반 요금은 700엔부터 시작하여 단계적으로 할인되어 13개월째부터 500엔이 됩니다." :
               "早期アクセスは永続的に月額500円でご利用いただけます。"}
            </p>
          </div>
        </details>

        <!-- FAQ Item 8: 解約について -->
        <details class="group bg-gray-50 rounded-lg">
          <summary
            class="flex justify-between items-center p-6 cursor-pointer hover:bg-gray-100 transition-colors"
          >
            <h3 class="text-lg font-semibold text-gray-900">
              {lang === "ja" ? "解約はいつでもできますか？" :
               lang === "en" ? "Can I cancel anytime?" :
               lang === "zh" ? "我可以随时取消吗？" :
               lang === "es" ? "¿Puedo cancelar en cualquier momento?" :
               lang === "ko" ? "언제든지 해약할 수 있나요?" :
               "解約はいつでもできますか？"}
            </h3>
            <svg
              class="w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
            </svg>
          </summary>
          <div class="px-6 pb-6">
            <p class="text-gray-700 leading-relaxed">
              {lang === "ja" ? "早期アクセスは3ヶ月の最低契約期間後、通常プランは3ヶ月ごとの更新時に解約可能です。解約後もNFCカードは継続してご利用いただけますが、オンライン機能は停止します。" :
               lang === "en" ? "Early access requires a 3-month minimum contract, then you can cancel anytime. Regular plans can be cancelled at 3-month renewal periods. Your NFC card remains functional after cancellation, but online features will be disabled." :
               lang === "zh" ? "早期访问需要3个月的最低合同，之后您可以随时取消。常规计划可在3个月更新期间取消。取消后您的NFC卡仍可使用，但在线功能将被禁用。" :
               lang === "es" ? "El acceso anticipado requiere un contrato mínimo de 3 meses. Los planes regulares se pueden cancelar en períodos de renovación de 3 meses." :
               lang === "ko" ? "조기 액세스는 3개월 최소 계약 기간 후, 일반 플랜은 3개월마다 갱신 시 해약 가능합니다." :
               "早期アクセスは3ヶ月の最低契約期間後、解約可能です。"}
            </p>
          </div>
        </details>
      </div>
    </div>

    <!-- Additional Help -->
    <div class="mt-12 text-center">
      <div class="bg-blue-50 rounded-xl p-8 max-w-2xl mx-auto">
        <h3 class="text-xl font-semibold text-gray-900 mb-4" id="additional-help-title">
          さらに詳しく知りたい方は
        </h3>
        <p class="text-gray-600 mb-6" id="additional-help-description">お気軽にお問い合わせください</p>
        <a
          href="https://cor-jp.com/contact/"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"
        >
          <svg
            class="w-5 h-5 mr-2"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
            ></path>
          </svg>
          <span id="additional-help-button-text">お問い合わせ</span>
        </a>
      </div>
    </div>
  </div>
</section>

