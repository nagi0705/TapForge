---
// Hero Section for TapForge
import { loadTranslation, getLocaleFromPathname, createTranslator } from '../utils/i18n';
import type { Language } from '../lib/i18n';

interface Props {
  lang: Language;
}

// Get language from props with fallback to Japanese
const { lang = "ja" } = Astro.props;

// Load translations
const locale = lang || getLocaleFromPathname(Astro.url.pathname);
const translations = await loadTranslation(locale);
const getT = createTranslator(translations);

// Get translations for the current language
const t = {
  title: getT("hero.title"),
  subtitle: getT("hero.subtitle"),
  description: getT("hero.description"),
  subDescription: getT("hero.subDescription"),
  cta: getT("hero.cta"),
  limited: getT("hero.limited"),
  features: {
    noApp: getT("hero.features.noApp"),
    free: getT("hero.features.free"),
    multilingual: getT("hero.features.multilingual"),
  }
};

// Language-specific limited text
const limitedText = {
  ja: "100名限定!",
  en: "Limited to 100!",
  zh: "限100名！",
  ko: "100명 한정!",
  es: "¡Limitado a 100!"
};

const currentLimited = limitedText[lang] || limitedText.ja;
---

<section
  class="bg-gradient-to-br from-white to-blue-50 min-h-screen flex items-center"
>
  <div class="container mx-auto px-4 py-16">
    <div class="max-w-4xl mx-auto">
      <!-- Main Content -->
      <div class="text-center">
        <!-- TapForge Brand Icon -->
        <div class="flex items-center justify-center mb-6">
          <img
            src="/images/favicon.png"
            alt="TapForge NFCデジタル名刺ロゴ"
            class="w-16 h-16 rounded-xl shadow-lg"
          />
          <div class="ml-4">
            <h2 class="text-2xl font-bold text-gray-800">TapForge</h2>
            <p class="text-sm text-gray-600">NFC Digital Business Card</p>
          </div>
        </div>

        <h1
          class="text-4xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight"
          id="hero-title"
          data-lang={lang}
        >
          {t.title}
        </h1>

        <!-- Hero Image -->
        <div class="relative mb-8">
          <img
            src="/images/hero-demo.png"
            alt="TapForge NFCデジタル名刺デモンストレーション - AI駆動の次世代名刺"
            class="w-full h-48 md:h-64 object-cover rounded-2xl shadow-lg opacity-80"
          />
          <div
            class="absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-2xl"
          >
          </div>
        </div>

        <p
          class="text-xl text-gray-700 mb-8 leading-relaxed"
          id="hero-description"
          data-lang={lang}
        >
          <span class="text-blue-600 font-semibold">{t.subtitle}</span>
          {t.description}
          <br />
          {t.subDescription}
        </p>

        <!-- CTA Button -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="#trial"
            class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-4 rounded-full text-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl inline-flex items-center justify-center min-h-[48px]"
            id="hero-cta"
          >
            <span class="text-red-500 font-bold mr-2">{t.limited}</span>
            {t.cta}
          </a>
        </div>
        <!-- Trust Indicators -->
        <div
          class="mt-8 flex flex-wrap justify-center gap-6 text-sm text-gray-500"
          id="hero-features"
        >
          <div class="flex items-center">
            <svg
              class="w-5 h-5 text-green-500 mr-2"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"></path>
            </svg>
            {t.features.noApp}
          </div>
          <div class="flex items-center">
            <svg
              class="w-5 h-5 text-green-500 mr-2"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"></path>
            </svg>
            {t.features.free}
          </div>
          <div class="flex items-center">
            <svg
              class="w-5 h-5 text-green-500 mr-2"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"></path>
            </svg>
            {t.features.multilingual}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>